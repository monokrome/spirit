# Audio Utilities

Utility audio generators for various purposes.

## Commands

- `white-noise` - White noise generator
- `pink-noise` - Pink noise generator
- `brown-noise` - Brown (Brownian) noise generator
- `drone` - Harmonic drone generator
- `sweep` - Frequency sweep generator
- `custom` - Custom frequency generator
- `layer` - Layered frequency generator
- `bowl` - Singing bowl simulator

---

## Noise Generators

### White Noise

Equal energy at all frequencies, creating a "hissing" sound.

**Characteristics**:
- Flat frequency spectrum
- All frequencies equally represented
- Sounds bright/harsh
- Measured as 0 dB/octave slope

**Uses**:
- Sleep masking
- Tinnitus relief
- Concentration (for some)
- Sound masking in offices
- Audio testing reference

**Technical**: Generated using linear congruential generator (LCG) random values.

---

### Pink Noise

Energy decreases with frequency, creating a more natural sound.

**Characteristics**:
- -3 dB/octave slope
- Equal energy per octave (not frequency)
- Sounds warmer than white noise
- More similar to natural sounds

**Uses**:
- Sleep (often preferred over white)
- Relaxation
- Audio system calibration
- Mixing reference

**Technical**: Generated by filtering white noise through 1/f algorithm.

---

### Brown (Brownian) Noise

Deeper, more bass-heavy than pink noise.

**Characteristics**:
- -6 dB/octave slope
- Named for Robert Brown (Brownian motion)
- Sounds like rumbling, thunder
- Strong low-frequency content

**Uses**:
- Deep relaxation
- Sleep (especially for those who prefer bass)
- Masking low-frequency disturbances
- Focus for some individuals

**Technical**: Generated using random walk (Brownian motion) algorithm.

---

## Tone Generators

### Custom Frequency

Generate any frequency you specify.

**Usage**:
```bash
./target/release/spirit custom -o ./output -d 300 --frequency 528
```

**Options**:
- Any frequency from sub-Hz to 20,000+ Hz
- Frequencies below 20 Hz automatically generate binaural beats
- Uses 100 Hz carrier for sub-audible frequencies

**Applications**:
- Testing specific frequency claims
- Matching a frequency from research
- Creating custom meditation tones

---

### Frequency Sweep

Sweeps through a range of frequencies over time.

**Default Range**: 20 Hz to 20,000 Hz

**Uses**:
- Audio system testing
- Hearing range check
- Interesting meditation experience
- Finding resonant frequencies

**Technical**: Logarithmic sweep from low to high frequency over duration.

---

### Drone Generator

Creates a rich, harmonic drone with fundamental and overtones.

**Characteristics**:
- Fundamental frequency + harmonics
- Natural overtone series
- Rich, full sound
- Meditative quality

**Default**: Based on specified or default root frequency

**Uses**:
- Meditation background
- Yoga/movement practice
- Sound healing sessions
- Ambient atmosphere

---

### Layered Frequencies

Combines multiple frequencies into a single audio file.

**Preset Layers**:
- Schumann (7.83 Hz) - binaural
- Solfeggio Mi (528 Hz)
- Solfeggio Fa (639 Hz)

**Characteristics**:
- Multiple simultaneous frequencies
- Complex harmonic interaction
- Rich listening experience

**Uses**:
- Comprehensive frequency therapy
- Multi-chakra work
- Complex meditation support

---

## Singing Bowl Simulator

Simulates Tibetan/Himalayan singing bowl sounds.

**Characteristics**:
- Fundamental frequency
- Inharmonic overtones (characteristic of metal bowls)
- Natural decay envelope
- Beat frequencies between close overtones

**Generated Bowls** (from `bowl` command):
| Frequency | Tuning | Note Approximation |
|-----------|--------|-------------------|
| 110 Hz | Root | A2 |
| 136.1 Hz | OM | C#3 |
| 172 Hz | Sacral | F3 |
| 256 Hz | Scientific C | C4 |
| 288 Hz | D | D4 |
| 324 Hz | E | E4 |
| 341.3 Hz | F | F4 |

**Technical Notes**:
- Uses amplitude modulation for "wobble" effect
- Exponential decay simulates natural sustain
- Overtones at non-integer ratios (unlike pure harmonic tones)

---

## Audio Formats

### Output Specifications
All Spirit audio files are:
- **Format**: WAV (uncompressed)
- **Sample Rate**: 44,100 Hz (CD quality)
- **Bit Depth**: 16-bit
- **Channels**: Mono (standard) or Stereo (binaural beats)

### Why WAV?
- No compression artifacts
- Universal compatibility
- Full frequency response
- Suitable for accurate frequency reproduction

### Converting to Other Formats
Use external tools if needed:
```bash
# Convert to MP3 (requires ffmpeg)
ffmpeg -i input.wav -b:a 320k output.mp3

# Convert to FLAC (lossless compression)
ffmpeg -i input.wav output.flac
```

---

## Binaural Beat Generation

### How It Works
For frequencies below 20 Hz (inaudible):
1. Carrier frequency (100 Hz) plays in left ear
2. Carrier + target frequency plays in right ear
3. Brain perceives the difference as the target frequency

**Example**: 7.83 Hz Schumann resonance
- Left ear: 100 Hz
- Right ear: 107.83 Hz
- Perceived: 7.83 Hz "beat"

### Requirements
- Stereo headphones required
- Speakers will not produce the effect
- Over-ear headphones often better than earbuds
- Quiet environment recommended

---

## Technical Implementation

### Audio Generation

**Sine Wave**:
```
sample = sin(2π × frequency × time)
```

**Binaural Beat**:
```
left = sin(2π × carrier × time)
right = sin(2π × (carrier + target) × time)
```

**Isochronic Tone**:
```
sample = sin(2π × carrier × time) × pulse_envelope
```

### Noise Generation

**White Noise**: Random values between -1 and 1

**Pink Noise**: White noise filtered with 1/f response

**Brown Noise**: Cumulative sum of random steps, normalized

---

## Usage Tips

### For Sleep
- Pink or brown noise often preferred over white
- Start at low volume
- May take time to adjust

### For Focus
- White noise can mask distractions
- Some prefer pink for less harshness
- Experiment to find preference

### For Meditation
- Drones provide steady anchor
- Singing bowls for traditional feel
- Layer for complex experience

### For Testing
- Sweep for frequency response
- White noise for system calibration
- Custom for specific frequency testing
